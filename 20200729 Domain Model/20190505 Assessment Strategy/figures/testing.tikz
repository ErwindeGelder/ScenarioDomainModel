% Define colors
\definecolor{colorCETRAN}{RGB}{160, 230, 255}
\definecolor{colorAV}{RGB}{255, 200, 160}
%
% Define lengths
\newlength{\blkw}\setlength{\blkw}{9em}
\newlength{\blkh}\setlength{\blkh}{4em}
\newlength{\sep}\setlength{\sep}{2em}
%
% Define styles
\tikzstyle{block}=[draw, minimum width=\blkw, minimum height=\blkh, text width=\blkw-1em, align=center, anchor=north west, line width=.5pt]
\tikzstyle{assessor}=[block, fill=colorCETRAN]
\tikzstyle{av}=[block, fill=colorAV]
\tikzstyle{assessor and av}=[block, left color=colorCETRAN, right color=colorAV]
\tikzstyle{decision}=[draw, diamond, minimum width=2em, minimum height=3em, line width=1pt]
\tikzstyle{arrow}=[->, line width=2pt]
\begin{tikzpicture}
	% Blocks
	\node[av](design) at (0, 0) {Design AV};
	\node[av, minimum height=3\blkh+2\sep](odd) at (0, -\blkh-\sep) {Describe ODD \& Functional requirements};
	\node[assessor](select) at (0, -4\blkh-4\sep) {Select relevant scenario (classes)};
	\node[assessor](reference) at (\blkw+\sep, -\blkh-\sep) {Determine reference};
	\node[assessor](metrics) at (\blkw+\sep, -2\blkh-2\sep) {Determine metrics};
	\node[assessor](criteria) at (\blkw+\sep, -3\blkh-3\sep) {Define test criteria};
	\node[assessor](test case) at (\blkw+\sep, -4\blkh-4\sep) {Generate test cases};
	\node[assessor](compare) at (2\blkw+2\sep, -\blkh-\sep) {Compare with reference};
	\node[assessor and av, minimum height=2\blkh+\sep](obtain metrics) at (2\blkw+2\sep, -2\blkh-2\sep) {Obtain test results (according to metrics)};
	\node[assessor](test) at (2\blkw+2\sep, -4\blkh-4\sep) {Design test plan};
	
	% Decision block
	\node[decision](decision) at (2.5\blkw+2\sep, -.5\blkh){};
	\node[right of=decision, node distance=\blkw, text width=7em, align=center](next) {Continue with other test};
	
	% Arrows
	\draw[arrow] (design) -- (odd);
	\draw[arrow] (odd) -- (select);
	\foreach \blk in {reference, criteria} {
		\node[coordinate, left of=\blk, node distance=.5\blkw+\sep](helper){};
		\draw[arrow] (helper) -- (\blk);
	}
	\draw[arrow] (metrics) -- (reference);
	\draw[arrow] (criteria) -- (metrics);
	\draw[arrow] (select) -- (test case);
	\draw[arrow] (criteria) -- (test case);
	\draw[arrow] (test case) -- (test);
	\draw[arrow] (test) -- (obtain metrics);
	\node[coordinate, right of=metrics, node distance=.5\blkw+\sep](helper){};
	\draw[arrow] (metrics) -- (helper);
	\draw[arrow] (obtain metrics) -- (compare);
	\draw[arrow] (reference) -- (compare);
	\draw[arrow] (compare) -- (decision);
	\draw[arrow] (decision) -- node[fill=white, align=center, text width=3em]{Refine design} (design);
	\draw[arrow] (decision) -- (next);
\end{tikzpicture}