%%==========================================================================
%% Title: There Is No Largest Prime Number
%% Author: Euclid of Alexandria
%% Published: 27th International Symposium of Prime Numbers, 1980
%%==========================================================================

\def\AspectR{169} %% Uncomment for 16:9 aspect ratio
%\def\AspectR{43} %% Uncomment for 4:3 aspect ratio

\documentclass[aspectratio=\AspectR,10pt,compress,t]{beamer} %% use option 'handout' for printable output, 
														     %% Use option 'compress' to get navigation dots horizontally
														     %% Use option 't' to align text on top of the slides


%%==========================================================================
%% Packages
%%==========================================================================
\usepackage{lmodern}                    %% Use Latin Modern font type
%\usepackage{helvet}                    %% Use Helvetica font type
\usepackage[T1]{fontenc}                %% support for special characters (e.g., accented)
\usepackage{amsmath}                    %% math typesetting; consider using the [cmex10] option
\usepackage{amssymb}                    %% special (symbol) fonts for math typesetting
\usepackage{amsthm}                     %% theorem styles
\usepackage{dsfont}                     %% double stroke roman fonts: the real numbers R: $\mathds{R}$
\usepackage{mathrsfs}                   %% formal script fonts: the Laplace transform L: $\mathscr{L}$
\usepackage{array}                      %% array functionality (array, tabular)
\usepackage{upgreek}                    %% upright Greek letters; add the prefix 'up', e.g. \upphi
\usepackage{stfloats}                   %% improved handling of floats
\usepackage{multirow}                   %% cells spanning multiple rows in tables
\usepackage[caption=false]{subfig}      %% subfigures
\usepackage{xspace}                     %% add space after macro depending on context
\usepackage{verbatim}                   %% provides the comment environment
\usepackage[UKenglish]{babel}     %% language support
\usepackage{multimedia}                 %% include movies
\usepackage{wrapfig}                    %% wrapping text around figures
\usepackage{pgfplots}                   %% support for TikZ figures (Matlab)
\usepackage{hyperref}                   %% implement hyperlinks
\usepackage{booktabs}					%% Use for tables
\usepackage{tabularx}					%% Use for tables
\usepackage{ifthen}						%% For usage of ifthenelse
\usetikzlibrary{shapes.callouts,shapes.misc} 


%%==========================================================================
%% TikZ figures
%%==========================================================================
\newlength\figurewidth
\setlength\figurewidth{0.25\linewidth}  %% set figure height
\newlength\figureheight
\setlength\figureheight{0.2\linewidth}  %% set figure width
\pgfplotsset{every axis/.append style={
    scaled y ticks=false,
    scaled x ticks=false,
    y tick label style={/pgf/number format/fixed},
    x tick label style={/pgf/number format/fixed},
    legend style={font=\small}},
    compat=1.9}                         %% PGFPlots package options
\usetikzlibrary{calc}                   %% coordinate calculations
%% Note: The TikZ overlay option does not work with external TikZ!
%\usetikzlibrary{external}              %% Create pdf figures from TikZ. Use PDFTeXify ...
%\tikzexternalize[prefix=./tikz/]       %% ... with --tex-option=--shell-escape switch.
%\tikzset{external/force remake}        %% Force pdf figure update


%%==========================================================================
%% User-defined commands
%%==========================================================================
\newcommand*{\mat}[1]{\mathbf{#1}}                              %% matrix/vector notation
\newcommand*{\matsym}[1]{\boldsymbol{#1}}                       %% matrix/vector notation for Greek letters
\newcommand*{\T}{^{\scriptscriptstyle{\mathrm{T}}}}             %% transpose operator
\newcommand*{\Hr}{^{\scriptscriptstyle{\mathrm{H}}}}            %% conjugate transpose operator
\newcommand*{\ud}{\mathrm{\,d}}                                 %% differential operator (upright d)
\newcommand*{\defeq}{\mathrel{\mathop:}=}                       %% definition sign :=
\newcommand*{\eqdef}{=\mathrel{\mathop:}}                       %% definition sign =:
\newcommand*{\ip}[2]{\left\langle#1\,{,}\,#2\right\rangle}      %% inner product
\newcommand*{\real}[1]{\mathrm{Re}(#1)}                         %% real part
\newcommand*{\imag}[1]{\mathrm{Im}(#1)}                         %% imaginary part
\newcommand*{\lsup}[1]{{}^{#1}\!}                               %% left superscript
\newcommand*{\hi}[1]{$^\text{#1}$}                              %% superscript in normal text
\newcommand*{\w}[1]{\mathrm{#1}}                                %% multiple character super-/subscript in math mode
\newcommand*{\Ln}{{\ensuremath{\mathcal{L}}}\xspace}            %% L norm
\newcommand*{\Lone}{{\ensuremath{\mathcal{L}_1}}\xspace}        %% L_1 norm
\newcommand*{\Ltwo}{{\ensuremath{\mathcal{L}_2}}\xspace}        %% L_2 norm
\newcommand*{\Linf}{{\ensuremath{\mathcal{L}_\infty}}\xspace}   %% L_inf norm
\newcommand*{\Lp}{{\ensuremath{\mathcal{L}_p}}\xspace}          %% L_p norm
\newcommand*{\Htwo}{{\ensuremath{\mathcal{H}_2}}\xspace}        %% H_2 norm
\newcommand*{\Hinf}{{\ensuremath{\mathcal{H}_\infty}}\xspace}   %% H_inf norm
\newcommand*{\Hp}{{\ensuremath{\mathcal{H}_p}}\xspace}          %% H_p norm
\renewcommand*{\qedsymbol}{$\blacksquare$}                      %% redefine the end-of-proof symbol
\DeclareMathOperator{\tr}{tr}                                   %% trace of a matrix
\DeclareMathOperator{\sgn}{sgn}                                 %% signum function
\DeclareMathOperator{\atan}{atan}                               %% arc tangent
\setlength{\heavyrulewidth}{0.1em}								%% Table stuff
\newcommand{\otoprule}{\midrule[\heavyrulewidth]}				%% Table stuff


%%==========================================================================
%% Miscellaneous
%%==========================================================================
\graphicspath{{figures/}{more_figures/}}        %% (graphicx) directory path for figures
\addtolength{\arraycolsep}{-0.5mm}              %% squeeze matrix columns a little
\fnbelowfloat                                   %% (stfloats) put footnote below a float at the page bottom
\urlstyle{same}                                 %% (hyperref) use current font for URLs
\hypersetup{pdftitle={Title},
            pdfauthor={Author},
            colorlinks=true,linkcolor=black}  %% (hyperref) pdf properties title and author
%\captionsetup[subfloat]{
%    farskip=0pt,
%    nearskip=0pt,
%    captionskip=0pt,
%    textfont=normalsize,
%    labelformat=empty}                         %% (subfig) subfloat caption format
%\captionsetup[figure]{
%    textfont=normalsize,
%    labelformat=empty}                         %% (subfig/caption) figure caption format
%\captionsetup[table]{
%    aboveskip=2pt,
%    labelfont={small,bf},
%    textfont={small,sc}}                       %% (subfig/caption) table caption format
\usetheme{TNO}                                  %% TNO presentation theme
\newif\ifshow\showfalse                         %% allow to skip slides using an if-then(-else) construct
\setbeamertemplate{bibliography item}{\insertbiblabel}

%%==========================================================================
%% Newcommands for this specific presentation
%%==========================================================================
\newcommand{\ontologytable}[1]{%
	\begin{table}
		\begin{center}
			\footnotesize
			\begin{tabularx}{\linewidth}{p{3em} X X}
				\toprule
				Term & Characteristics & ``has'' \\ \otoprule
				\ifthenelse{\equal{#1}{2}}{\leavevmode\color{red}}{} Scenario class & \ifthenelse{\equal{#1}{2}}{\leavevmode\color{red}}{} Qualitative description of scenario & \ifthenelse{\equal{#1}{2}}{\leavevmode\color{red}}{} Scenarios \newline Other (less generic) scenario classes \newline One or multiple tags \\
				\ifthenelse{\equal{#1}{1}}{\leavevmode\color{red}}{} Scenario & \ifthenelse{\equal{#1}{1}}{\leavevmode\color{red}}{} Quantitative description \newline Time interval & \ifthenelse{\equal{#1}{1}}{\leavevmode\color{red}}{} One or multiple events \newline One or multiple activities \newline Ego vehicle \newline Static environment \newline Dynamic environment \\
				\ifthenelse{\equal{#1}{3}}{\leavevmode\color{red}}{} Event & \ifthenelse{\equal{#1}{3}}{\leavevmode\color{red}}{} Time instant \newline State transition & \\
				\ifthenelse{\equal{#1}{3}}{\leavevmode\color{red}}{} Activity & \ifthenelse{\equal{#1}{3}}{\leavevmode\color{red}}{} Inter-event time interval \newline Quantitative description of (changing) state & \ifthenelse{\equal{#1}{3}}{\leavevmode\color{red}}{} Model that describes the way the state evolves \\
				\bottomrule
			\end{tabularx}
		\end{center}
	\end{table}
}

%%==========================================================================
%% Document meta data
%%==========================================================================
\title[Ontology of Scenario | \insertsubtitle]{Ontology of Scenario}
\subtitle{for the Assessment of Automated Vehicles}
\author[deGelder]{Erwin de Gelder \texttt{erwin.degelder@tno.nl}}
\date[11th of January]{Streetwise workshop}

%%==========================================================================
%% Begin document
%%
%% In case of colored elements, please use the standard TNO colors TNOred,
%% TNOgreen, TNOblue, TNOdarkblue, TNOorange, TNOyellow, TNOgray, and
%% TNOlightgray.
%%==========================================================================

\begin{document}

{\setbeamertemplate{footline}{} %% no footer on title page
%\titlebackground{Streetwise.pdf}  %% custom background (comment for default background)
\blacktitle                     %% black text & banner on title page (comment for white text & banner)
\begin{frame}
    \titlepage
    \begin{tikzpicture}[overlay, remember picture]
	    \useasboundingbox (current page.north west) rectangle (current page.south east);
	    \node at (-3.3, 4.7) {\includegraphics[scale=0.55]{Streetwise.pdf}};
    \end{tikzpicture}
\end{frame}}

\begin{frame}{Table of contents}
	\tableofcontents
	%\begin{tikzpicture}[overlay, remember picture]
	%	\useasboundingbox (current page.north west) rectangle (current page.south east);
	%	\node at (9.3, 3.5) {\includegraphics[scale=0.9]{Streetwise.pdf}};
	%\end{tikzpicture}
\end{frame}

\section{Introduction}
\stepcounter{subsection}
\begin{frame}{What is an ontology?}
	\begin{itemize}
		\item An explicit specification of a conceptualization \cite{gruber1993ontology}.
		\item Detailed explanation of objects \cite{vanDamPhDThesis2009}.
		\item Explanation of relations between different objects \cite{vanDamPhDThesis2009}.
	\end{itemize}
\end{frame}

\begin{frame}{Why use an ontology?}
	\begin{itemize}
		\item Sharing knowledge between domain experts \cite{vanDamPhDThesis2009}.
		\item Interface definition between objects \cite{vanDamPhDThesis2009}.
		\item Class structure (for object-oriented software implementations) \cite{vanDamPhDThesis2009}.
	\end{itemize}
\end{frame}

\begin{frame}{Why use an ontology for the assessment of AVs}
	Some useful definitions already exists:
	\begin{itemize}
		\item Geyer et al. \cite{geyer2014}.
		\item Ulbrich et al. \cite{ulbrich2015} (PEGASUS).
		\item Elrofai et al. \cite{elrofai2016scenario}.
		\item Bagschik et al. \cite{bagschik2017ontology} (PEGASUS, preprint, to be published).
	\end{itemize}
	But...
	\begin{itemize}
		\item A more concrete definition is needed to ``translate definition to code''.
		\item The presented ontology is more applicable for \textbf{scenario mining} and \textbf{scenario-based assessment}.
	\end{itemize}
\end{frame}

\begin{frame}{Warning}
	\visible<2>{%
		\begin{figure}
			\begin{center}
				\includegraphics[width=\linewidth]{boring.jpg}
			\end{center}
		\end{figure}	
	}
\end{frame}

\section{Scenario}
\stepcounter{subsection}
\begin{frame}{Ontology}
	\ontologytable{0}
\end{frame}
\begin{frame}{Scenario}
	\ontologytable{1}
\end{frame}

\begin{frame}{Relevant definitions}
	\begin{itemize}
		\item Geyer et al. \cite{geyer2014}: A scenario includes at least one situation within a scene including the scenery and dynamic elements. However, [a] scenario further includes the ongoing activity of one or both actors.
		\item Ulbrich et al. \cite{ulbrich2015}: A scenario is the temporal development between several scenes in a sequence of scenes. Every scenario starts with an initial scene. Actions \& events as well as goals \& values may be specified to characterize this temporal development in a scenario. Other than a scene, a scenario spans a certain amount of time.
		\item Elrofai et al. \cite{elrofai2016scenario}: A scenario is the combination of actions and manoeuvres of the host vehicle in the passive [i.e., static] environment, and the ongoing activities and manoeuvres of the immediate surrounding active [i.e., dynamic] environment for a certain period of time.
	\end{itemize}
\end{frame}

\begin{frame}{Scenario characteristics}
	\begin{itemize}
		\item A scenario corresponds to a time interval.
		\item A Scenario consists of one or several events.
		\item Real-life traffic scenarios are quantitative scenarios.
		\item The time interval of a scenario contains all relevant events.
		\item A scenario includes the description of the static and dynamic environment.
	\end{itemize}
	\begin{definition}[Scenario]
		A scenario is a quantitative description of the ego vehicle, its activity and/or goals, its static environment, and its dynamic environment. From the perspective of the ego vehicle, it contains the relevant events.
	\end{definition}
\end{frame}

\begin{frame}{Scenario definition vs. literature}
	We do not use the term \emph{scene}, as opposed to Geyer et al. \cite{geyer2014} and Ulbrich et al. \cite{ulbrich2015}. \emph{Scene follow from scenario description.}
	
	Scenarios are quantitative descriptions. For qualitative descriptions, see \emph{scenario classes}.
\end{frame}

\section{Scenario class}
\stepcounter{subsection}
\begin{frame}{Scenario class}
	\ontologytable{2}
\end{frame}

\begin{frame}{Example scenario class}
	\begin{example}[Scenario class]
		Cut-in of vehicle in front on a merging on the highway with moderate rain.
	\end{example}

	Tags:
	\begin{itemize}
		\item Cut-in of vehicle in front
		\item Merging on the highway
		\item Moderate rain
	\end{itemize}
\end{frame}

\begin{frame}{Scenario class}{Tags}
	\begin{figure}
		\begin{center}
			\input{figures/tree_road.tikz}
			\caption{Tags for the type of road \cite{Bonnin2014}.}
		\end{center}
	\end{figure}

	More generic scenario class: Cut-in of vehicle in front on the highway with moderate rain.
\end{frame}

\begin{frame}{Scenario class}{Notes}
	\begin{itemize}
		\item Scenario class can contain other scenario classes.
		\item Single scenario class contains multiple scenarios.
		\item Single scenario belongs to multiple scenario classes (depending on its tags).
	\end{itemize}
\end{frame}

\section{Event and activity}
\stepcounter{subsection}
\begin{frame}{Event and activity}
	\ontologytable{3}
\end{frame}

\begin{frame}{Event}
	\begin{itemize}
		\item An event corresponds to a time instant \cite{breu1997towards, kim1993supervenience, sartori1996understanding, branicky1998hybridcontrol, boel1999hybridcontrol, heemels2012eventcontrol}.
		\item An event marks the transition of a state \cite{deGelder2017assessment}.
	\end{itemize}
	\begin{definition}[Event]
		An event marks the time instant at which a transition of a state occurs, such that before and after an event, the state is described by a different model.
	\end{definition}
\end{frame}

\begin{frame}{Activity}
	\begin{itemize}
		\item During the inter-event time interval, the state is quantitatively described.
		\item Activity refers to the way the state evolves during the inter-event time interval.
	\end{itemize}
\end{frame}

\section{Example}
\stepcounter{subsection}
\begin{frame}{Example}
	\vspace{-1em}
	\begin{figure}
		\centering
		\setlength\figureheight{106pt}
		\setlength\figurewidth{260pt}
		\subfloat[Last vehicle overtakes other vehicles.]{\input{figures/scenario_situation_1.tikz}}\\
		\setlength\figureheight{100pt}
		\subfloat[Another overtaking.]{\input{figures/scenario_situation_2.tikz}}
		\caption{Schematic overview of the traffic scenarios. The red car is the ego-vehicle.}
	\end{figure}
\end{frame}

\begin{frame}{Example}
	\vspace{-1em}
	\begin{figure}
		\centering
		\setlength\figureheight{150pt}
		\setlength\figurewidth{248pt}
		\input{figures/lon_vel.tikz}
		\caption{Activities of the ego vehicle. The blue line shows the measured data and the orange dashed line shows the output of the model fitted to the data. The black vertical lines indicate the events.}
	\end{figure}
\end{frame}

\begin{frame}{Example}
	\vspace{-1em}
	\begin{figure}
		\centering
		\setlength\figureheight{150pt}
		\setlength\figurewidth{248pt}
		\input{figures/lat_pos.tikz}
		\caption{Activities of the ego vehicle. The blue line shows the measured data and the orange dashed line shows the output of the model fitted to the data. The black vertical lines indicate the events.}
	\end{figure}
\end{frame}

\begin{frame}{Example}
	\vspace{-1em}
	\begin{figure}
		\centering
		\setlength\figureheight{150pt}
		\setlength\figurewidth{248pt}
		\input{figures/rel_lon_pos.tikz}
		\caption{States of the dynamic environment.}
	\end{figure}
\end{frame}

\begin{frame}{Example}
	\vspace{-1em}
	\begin{figure}
		\centering
		\setlength\figureheight{150pt}
		\setlength\figurewidth{248pt}
		\input{figures/rel_lat_pos.tikz}
		\caption{States of the dynamic environment.}
	\end{figure}
\end{frame}

\begin{frame}{Example}
	\vspace{-1em}
	\begin{figure}
		\centering
		\setlength\figureheight{160pt}
		\setlength\figurewidth{450pt}
		\input{figures/events.tikz}
		\vspace{-1em}
		\caption{Complete overview of the events and activities of the example. Every vertical black line represents an event. The end of the first scenario and the start of the second scenario is at the moment the ego vehicle starts the first lane change, i.e., at $t=17\ \textup{s}$.}
	\end{figure}
\end{frame}

\section{Final remarks}
\stepcounter{subsection}
\begin{frame}{Discussion}
	\begin{itemize}
		\item Start and end of a scenario is still ambiguous.
		\item This definition provides a step towards a \emph{completeness measure}, which is until now an open issue \cite{geyer2014, alvarez2017prospective, stellet2015taxonomy}. The number of scenario classes is a combinatorial problem \cite{geyer2014}, for which solutions exists (cf.\ \cite{yang2012estimating, bunge1993estimating}). Other measures are required to quantify the variety of the scenarios that belong to a specific scenario class (cf.~\cite{wang2017much}).
	\end{itemize}
\end{frame}

\begin{frame}{Conclusion}
	Ontology presented that is more applicable for scenario mining and scenario-based assessment.
\end{frame}

\section{References}
\stepcounter{subsection}
\begin{frame}{References}
\end{frame}

\begin{frame}[allowframebreaks]
	%\frametitle{References}  % This gives an error...
	\scriptsize{\bibliographystyle{ieeetran}}
	\bibliography{../bib}
\end{frame}

\end{document}