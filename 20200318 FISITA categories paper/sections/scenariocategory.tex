\section{Terminology}
\label{sec:scenario category}

In this section, we first explain what we mean with scenarios and scenario categories. Next, in \cref{sec:tags for scenario catgories}, we describe why tags are used to define scenario categories. We end this section in \cref{sec:test cases} with an explanation of the relation between the scenario categories and test cases for the assessment of AVs.



\subsection{What is a scenario category?}
\label{sec:definition scenario category}

We distinguish quantitative scenarios from qualitative scenarios, using the definitions of \emph{scenario} and \emph{scenario category} of \autocite{degelder2020ontology}:

\begin{definition}[Scenario]
	\label{def:scenario}
	A scenario is a quantitative description of the relevant characteristics of the ego vehicle, its activities and/or goals, its static environment, and its dynamic environment. In addition, a scenario contains all events that are relevant to the ego vehicle.
\end{definition}

\begin{definition}[Scenario category]
	\label{def:scenario category}
	A scenario category is a qualitative description of the ego vehicle, its activities and/or goals, its static environment, and its dynamic environment.
\end{definition}

Introducing the concept of scenario categories brings the following benefits \autocite{degelder2020ontology}:
\begin{itemize}
	\item For a human, it is easier to interpret a qualitative description rather than a quantitative description.
	\item It enables to refer to a group of scenarios that have something in common. Therefore, it enables characterization of the type of scenarios, thus making discussing scenarios much easier.
	\item It allows for quantifying the completeness of a set of scenarios by separately quantifying the completeness of scenario categories and the completeness of scenarios in each category.
	This is easier because scenario categories are discrete by nature whereas scenarios are continuous. See \autocite{degelder2019completeness} for more details.
\end{itemize}

\setlength{\venncircle}{4em}
\begin{figure}[t]
	\centering
	\input{figures/venn_diagrams.tikz}
	\caption{The red and green circles correspond to the scenario categories $\scenariocategoryb$ and $\scenariocategoryc$, respectively. The overlap between the two circles corresponds to scenario category $\scenariocategorya$. The dots represent scenarios $\scenarioa$, $\scenariob$, and $\scenarioc$.}
	\label{fig:venn diagram scenario category}
\end{figure}

To describe the relation between a scenario and a scenario category, the verb ``to comprise'' is used \autocite{degelder2020ontology}.
If a specific scenario category $\scenariocategory$ is an abstraction of a specific scenario $\scenario$, then we say that the specific scenario category $\scenariocategory$ comprises that specific $\scenario$. 
To describe the relation between two scenario categories, the verb ``to include'' is used \autocite{degelder2020ontology}. 
To further illustrate this, consider \cref{fig:venn diagram scenario category}, where $\scenarioa$, $\scenariob$, and $\scenarioc$ represent scenarios and $\scenariocategorya$, $\scenariocategoryb$, and $\scenariocategoryc$ represent scenario categories.
The following principles apply for these relations:
\begin{itemize}
	\item A given scenario category can comprise multiple scenarios, e.g., in \cref{fig:venn diagram scenario category}, $\scenariocategoryb$ comprises $\scenarioa$ and $\scenariob$.
	\item Multiple scenario categories can comprise a specific scenario, e.g., in \cref{fig:venn diagram scenario category}, both $\scenariocategorya$ and $\scenariocategoryb$ comprise $\scenariob$. 
	\item A scenario category includes another scenario category if it comprises all scenarios that the other scenario category comprises, e.g., in \cref{fig:venn diagram scenario category}, $\scenariocategoryb$ includes $\scenariocategorya$.
\end{itemize}



\subsection{Why using tags?}
\label{sec:tags for scenario catgories}

%We propose to provide scenario categories with additional information in the form of tags that describe the scenario in a qualitative manner.
Tags are often used when providing extra information on a piece of data \autocite{smith2007tagging}. A tag is a keyword or a term that helps describing an item. For example, items in a database can contain some tags that enable users to quickly obtain several items that share a certain characteristic described by a tag \autocite{craft2004tagging}. 
Applications are very broad, e.g., from classification of audio data \autocite{kong2017joint} capturing musical characteristics from songs \autocite{ellis2011semantic} to tagging of Wikipedia pages \autocite{voss2006collaborative}.
The use of these tags brings several benefits:
\begin{itemize}
	\item The tags of a scenario can be helpful in determining which scenario categories do and do not comprise the scenario \autocite{degelder2020scenariomining}.
	%\item If a scenario category that only contains known tags is added to the database of scenario categories, it can easily be seen which scenarios the scenario category comprises by only inspecting the tags of the scenarios. Therefore, there is no need to define scenario categories a priori.
	\item It is easy to select scenarios from a scenario database or a scenario library by using tags or a combination of tags.
	\item As opposed to the proposed categorization of scenarios in \autocite{opdencamp2014cats, USDoT2007precrashscenarios, lenard2014typical, lara2019harmonized, lara2019harmonized}, scenario categories do not need to be mutually exclusive.
\end{itemize}

There is a balance between having generic scenario categories --- and thus a wide variety among the scenarios belonging to the scenario category --- and having specific scenario categories without much variety among the scenarios in the scenario category. For some systems, one may be interested in very specific set of scenarios, while for another system one might be interested in a set of scenarios with a high variety. To accommodate this, tags can be structured in hierarchical trees \autocite{molloy2017dynamic}. The different layers of the trees can be regarded as different abstraction levels \autocite{Bonnin2014}. 




\subsection{Test cases}
\label{sec:test cases}

Scenario categories can be used to define relevant test cases for the assessment of AVs, see, e.g., \cite{ploeg2018cetran,elrofai2016scenario}. It is generally acknowledged that test cases for the safety assessment of AVs should be based on real-world scenarios \cite{putz2017pegasus, roesener2016scenariobased, deGelder2017assessment}. Nevertheless, the terms scenario and test case are often confused; also the combination test scenario is often used in discussions\footnote{We consider a \emph{test scenario} to be similar to \emph{test case}, but we prefer using the term \emph{test case} as to reduce confusion with the term \emph{scenario}.}. %In this section, the concept of a test case is explained and it is shown what the difference is between scenarios and test cases.

We use the term scenario for a description of a situation that can happen or has happened in the real world. In other words, scenarios are used to describe any type of situation that a vehicle in operation can encounter during its lifetime. The set of scenarios described by the scenario categories will not fully cover all possible situations that can occur in reality. In \cref{fig:test cases}, this is represented by the fact that the available set of scenarios (red) does not cover all relevant situations in the real world (blue).

\definecolor{realworld}{RGB}{50, 50, 192}
\definecolor{scenarios}{RGB}{192, 50, 50}
\definecolor{ODD}{RGB}{50, 192, 50}
\definecolor{testcases}{RGB}{255, 255, 153}
\setlength{\realworldwidth}{15em}
\setlength{\realworldheight}{9em}
\tikzstyle{thickness}=[ultra thick]
\begin{figure}
	\centering
	\begin{tikzpicture}	
		% Test cases?
		\begin{scope}
		\clip (.1\realworldwidth, 0) ellipse (.7\realworldwidth/2 and .8\realworldheight/2); 
		\fill[testcases] (-.1\realworldwidth, 0) ellipse (.7\realworldwidth/2 and .8\realworldheight/2);
		\end{scope}
		
		% The real world
		\node[ellipse, minimum height=\realworldheight, minimum width=\realworldwidth, realworld, draw, thickness](real world) at (0, 0) {};
		\node(real world text) at (.45\realworldwidth, .5\realworldheight) {Real world};
		\draw[thickness, realworld](real world) -- (real world text);
		
		% Set of scenarios
		\node[ellipse, minimum height=0.8\realworldheight, minimum width=.7\realworldwidth, scenarios, draw, thickness](scenarios) at (-.1\realworldwidth, 0) {};
		\node(scenarios text) at (-.45\realworldwidth, .5\realworldheight) {Scenarios};
		\draw[thickness, scenarios](scenarios) -- (scenarios text);
		
		% ODD
		\node[ellipse, minimum height=.8\realworldheight, minimum width=.7\realworldwidth, ODD, draw, thickness](odd) at (.1\realworldwidth, 0) {};
		\node(odd text) at (.45\realworldwidth, -.45\realworldheight) {ODD};
		\draw[thickness, ODD](odd) -- (odd text);
		\node at (0, 0) {Test cases};
	\end{tikzpicture}
	\caption{The relation between the real world, the ODD, the scenarios, and test cases.
		%The set of scenarios (red) is a subset of what can happen or can be encountered in the real world (blue). The Operational Design Domain (ODD, green) is also part of the real world (blue), but is not necessarily aligned with the set of scenarios (red). The set of test cases (shaded yellow region) is a subset of the set of scenarios and, ideally, the ODD (green) fully fits within the set of scenarios (red) and there are no test cases that are outside the ODD (green).
	}
	\label{fig:test cases}
\end{figure}

To describe the difference between a scenario and a test case, it is important to know a vehicle's Operational Design Domain (ODD)\footnote{SAE automotive standard J3016 \autocite{sae2018j3016} defines an ODD as ``operating conditions under which a given driving automation system or feature thereof is specifically designed to function, including, but not limited to, environmental, geographical, and time-of-day restrictions, and/or the requisite presence or absence of certain traffic or roadway characteristics.''}, to determine the set of relevant test cases. The ODD depends on the application of an AV and usually is the result of the design of the AV in relation to the requirements of the application. An ODD covers a dedicated and limited area of the real world as indicated in \cref{fig:test cases} by the green set.

%The ODD is very likely to differ for different type of vehicles, or even for a different application of a vehicle. \Cref{fig:test cases} considers the ODD of one vehicle type for a given application. Moreover, the figure shows that part of the ODD is covered by the set of scenarios, but possibly we do not have all scenarios identified to cover all of the ODD. A set of scenarios is considered complete in case it covers all relevant ODDs. 

Once the ODD is known, and we have scenarios that cover (part of) the ODD, test cases can be generated. The set of test cases is considered to be a subset of scenarios, as not all scenarios are relevant for each type of vehicle or each type of application. However, test cases are always generated from scenarios; we therefore assume that no test case is generated in areas not covered by the set of scenarios. It is unnecessary to provide test cases outside the ODD, as the system is not expected to respond outside the ODD. The set of test cases in \cref{fig:test cases}, is denoted by the yellow shaded area. It is represented by the intersection of the set of scenarios and the ODD. In the ideal case, the scenario set is complete and encompasses the ODD. In \cref{fig:test cases}, this would show if the ODD (green) would fully fit within the set of scenarios (red).

